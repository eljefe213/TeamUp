{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Utilisateur\\\\Desktop\\\\front\\\\src\\\\helpers\\\\require-auth-data.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\n//import d'une action qui chargera les bière venant dun back\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport { selectUser, connectUser } from '../slices/userSlice';\nimport { Navigate, useParams } from 'react-router-dom';\nimport { updateProfil, checkMyToken } from '../api/user';\n\n//HOC de controle des datas et de la sécurité\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RequireDataAuth = props => {\n  _s();\n  //on récup les params de la route\n  const params = useParams();\n  //on récupère la state user dans le store en mode lecture\n  const user = useSelector(selectUser);\n\n  //on prépare la fonctionnalité pour dispatcher notre action dans le store\n  const dispatch = useDispatch();\n  //on récupère le composant à afficher qui a été passé en tant que props via App.js\n  const Child = props.child;\n\n  //gestion de la redirection\n  const [redirect, setRedirect] = useState(false);\n\n  //au chargement de chaque composant\n  useEffect(() => {\n    if (user.isLogged === true) {\n      console.log(\"accès à la route protégée autorisée\");\n    } else {\n      setRedirect(true);\n    }\n  }, [props]);\n  if (redirect) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Child, {\n    ...props,\n    params: params\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 13\n  }, this);\n};\n_s(RequireDataAuth, \"gj+SL2IMmEtwYXSK2+RjMlnDinU=\", false, function () {\n  return [useParams, useSelector, useDispatch];\n});\n_c = RequireDataAuth;\nexport default RequireDataAuth;\nvar _c;\n$RefreshReg$(_c, \"RequireDataAuth\");","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","selectUser","connectUser","Navigate","useParams","updateProfil","checkMyToken","RequireDataAuth","props","params","user","dispatch","Child","child","redirect","setRedirect","isLogged","console","log"],"sources":["C:/Users/Utilisateur/Desktop/front/src/helpers/require-auth-data.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\n//import d'une action qui chargera les bière venant dun back\n\nimport {useSelector, useDispatch} from 'react-redux' \nimport {selectUser, connectUser} from '../slices/userSlice'\n\nimport {Navigate, useParams} from 'react-router-dom'\nimport {updateProfil, checkMyToken} from '../api/user'\n\n\n//HOC de controle des datas et de la sécurité\nconst RequireDataAuth = (props) =>{\n    //on récup les params de la route\n    const params = useParams()\n    //on récupère la state user dans le store en mode lecture\n    const user = useSelector(selectUser)\n\n    //on prépare la fonctionnalité pour dispatcher notre action dans le store\n    const dispatch = useDispatch()\n    //on récupère le composant à afficher qui a été passé en tant que props via App.js\n    const Child = props.child\n    \n    //gestion de la redirection\n    const [redirect, setRedirect] = useState(false)\n    \n    //au chargement de chaque composant\n    useEffect(()=>{\n        \n        if(user.isLogged===true){\n            console.log(\"accès à la route protégée autorisée\")\n        }\n        else{\n            setRedirect(true)\n        }\n\n    }, [props])\n    \n    if(redirect){\n        return <Navigate to=\"/login\"/>\n    }\n    return (<Child {...props} params={params}/>)\n}\n\nexport default RequireDataAuth"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,QAAQ,EAAEC,SAAS,QAAO,OAAO;AAChD;;AAEA,SAAQC,WAAW,EAAEC,WAAW,QAAO,aAAa;AACpD,SAAQC,UAAU,EAAEC,WAAW,QAAO,qBAAqB;AAE3D,SAAQC,QAAQ,EAAEC,SAAS,QAAO,kBAAkB;AACpD,SAAQC,YAAY,EAAEC,YAAY,QAAO,aAAa;;AAGtD;AAAA;AACA,MAAMC,eAAe,GAAIC,KAAK,IAAI;EAAA;EAC9B;EACA,MAAMC,MAAM,GAAGL,SAAS,EAAE;EAC1B;EACA,MAAMM,IAAI,GAAGX,WAAW,CAACE,UAAU,CAAC;;EAEpC;EACA,MAAMU,QAAQ,GAAGX,WAAW,EAAE;EAC9B;EACA,MAAMY,KAAK,GAAGJ,KAAK,CAACK,KAAK;;EAEzB;EACA,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;;EAE/C;EACAC,SAAS,CAAC,MAAI;IAEV,IAAGY,IAAI,CAACM,QAAQ,KAAG,IAAI,EAAC;MACpBC,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;IACtD,CAAC,MACG;MACAH,WAAW,CAAC,IAAI,CAAC;IACrB;EAEJ,CAAC,EAAE,CAACP,KAAK,CAAC,CAAC;EAEX,IAAGM,QAAQ,EAAC;IACR,oBAAO,QAAC,QAAQ;MAAC,EAAE,EAAC;IAAQ;MAAA;MAAA;MAAA;IAAA,QAAE;EAClC;EACA,oBAAQ,QAAC,KAAK;IAAA,GAAKN,KAAK;IAAE,MAAM,EAAEC;EAAO;IAAA;IAAA;IAAA;EAAA,QAAE;AAC/C,CAAC;AAAA,GA9BKF,eAAe;EAAA,QAEFH,SAAS,EAEXL,WAAW,EAGPC,WAAW;AAAA;AAAA,KAP1BO,eAAe;AAgCrB,eAAeA,eAAe;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}