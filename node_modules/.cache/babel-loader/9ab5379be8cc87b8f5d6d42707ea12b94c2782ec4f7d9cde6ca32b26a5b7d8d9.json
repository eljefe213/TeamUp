{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Utilisateur\\\\Desktop\\\\front\\\\src\\\\containers\\\\login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { loginUser } from '../api/user';\nimport { useNavigate } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { selectUser, connectUser } from '../slices/userSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = props => {\n  _s();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [redirect, setRedirect] = useState(false);\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (redirect) {\n      navigate(\"/\");\n    }\n  }, [redirect]);\n  const onSubmitForm = () => {\n    let datas = {\n      email: email,\n      password: password\n    };\n    loginUser(datas).then(res => {\n      if (res.success === \"Succès de l'authentification\") {\n        console.log(\"inininininiin\");\n        window.localStorage.setItem('weshToken', res.token);\n        let obj = {\n          token: res.token,\n          user: res.user\n        };\n        dispatch(connectUser(obj));\n        setRedirect(true);\n      }\n    }).catch(err => console.log(err));\n  };\n  /*if(redirect){\n      return <Navigate to=\"/\" />\n  }*/\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section-login\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Pour vous connectr \\xE0 Team Up, entrez votre identfiant et mot de passe\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form\",\n        onSubmit: e => {\n          e.preventDefault();\n          onSubmitForm();\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          placeholder: \"Votre mail\",\n          onChange: e => {\n            setEmail(e.currentTarget.value);\n          },\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"Votre mot de passe\",\n          onChange: e => {\n            setPassword(e.currentTarget.value);\n          },\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          name: \"Enregistrer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n};\n_s(Login, \"VwrAfeD/CMj/I8OV00aO5ytJJAg=\", false, function () {\n  return [useNavigate, useDispatch];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useEffect","loginUser","useNavigate","useSelector","useDispatch","selectUser","connectUser","Login","props","email","setEmail","password","setPassword","redirect","setRedirect","navigate","dispatch","onSubmitForm","datas","then","res","success","console","log","window","localStorage","setItem","token","obj","user","catch","err","e","preventDefault","currentTarget","value"],"sources":["C:/Users/Utilisateur/Desktop/front/src/containers/login.jsx"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport {loginUser} from '../api/user'\nimport {useNavigate} from 'react-router-dom'\nimport {useSelector, useDispatch} from 'react-redux' \nimport {selectUser, connectUser} from '../slices/userSlice'\n\n\nconst Login = (props) =>{\n    \n    const [email, setEmail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n    \n    const [redirect, setRedirect] = useState(false)\n\n    const navigate= useNavigate()\n    const dispatch= useDispatch()\n\n    useEffect(()=>{\n        if(redirect){\n            navigate(\"/\")\n        }\n    },[redirect])\n    \n    const onSubmitForm = ()=>{\n        let datas = {\n            email: email,\n            password: password\n        }\n        \n        loginUser(datas)\n        .then((res)=>{\n            if(res.success === \"Succès de l'authentification\"){\n                console.log(\"inininininiin\")\n                window.localStorage.setItem('weshToken', res.token)\n                let obj ={\n                    token: res.token,\n                    user : res.user\n                }\n                dispatch(connectUser(obj))\n                setRedirect(true)\n            }\n        })\n        .catch(err=>console.log(err))\n    }\n    /*if(redirect){\n        return <Navigate to=\"/\" />\n    }*/\n    return (\n        <section className=\"container\">\n            <div className=\"section-login\">\n                <p>Pour vous connectr à Team Up, entrez votre identfiant et mot de passe</p>\n                <form\n                    className=\"form\"\n                    onSubmit={(e)=>{\n                    e.preventDefault()\n                    onSubmitForm()\n                    }}\n                >\n                    \n                    <input type=\"email\"\n                        placeholder=\"Votre mail\"\n                        onChange={(e)=>{\n                            setEmail(e.currentTarget.value)\n                        }}\n                        required\n                    />\n                    \n                    <input type=\"password\"\n                        placeholder=\"Votre mot de passe\"\n                        onChange={(e)=>{\n                            setPassword(e.currentTarget.value)\n                        }}\n                        required\n                    />\n                    \n                    <input type=\"submit\" name=\"Enregistrer\" />\n                </form>\n            </div>\n        </section>\n    )\n}\n\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}